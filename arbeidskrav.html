<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Romlig analyse av boligpriser i King County</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="arbeidskrav_files/libs/clipboard/clipboard.min.js"></script>
<script src="arbeidskrav_files/libs/quarto-html/quarto.js"></script>
<script src="arbeidskrav_files/libs/quarto-html/popper.min.js"></script>
<script src="arbeidskrav_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="arbeidskrav_files/libs/quarto-html/anchor.min.js"></script>
<link href="arbeidskrav_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="arbeidskrav_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="arbeidskrav_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="arbeidskrav_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="arbeidskrav_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="arbeidskrav_files/libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="arbeidskrav_files/libs/tabwid-1.1.3/tabwid.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Romlig analyse av boligpriser i King County</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduksjon" class="level1">
<h1><strong>1.0 Introduksjon</strong></h1>
<p>I denne oppgaven skal vi analysere boligmarkedet i King County i USA, med fokus på ulike faktorer som påvirker boligprisene. Vi vil estimere ulike hedoniske prismodeller for å undersøke hvordan både huskarkateristika og områdespesifikke variabler påvirker salgsprisene. Gjennom en <em>Exploratory Data Analysis (EDA)</em> vil vi kartlegge og visualisere data for å avdekke trender og mønstre i boligmarkedet. Ved bruk av romlige regresjonsmodeller forsøker vi å forstå hvordan geografiske forskjeller og nærmiljøets karakteristika bidrar til variasjoner i boligpriser.</p>
</section>
<section id="data" class="level1">
<h1><strong>2.0 Data</strong></h1>
<section id="house-sales-in-king-county-usa" class="level2">
<h2 class="anchored" data-anchor-id="house-sales-in-king-county-usa">2.1 House Sales in King County, USA</h2>
<p>Det første datasettet vi har brukt i oppgaven er <em>House Sales in King County, USA</em> fra Kaggle. Datasettet inneholder rundt 27 000 observasjoner med detaljerte variabler som beskriver ulike egenskaper ved de solgte boligene. I tillegg inneholder datasettet salgspris og geografiske koordinater for hver observasjon. Variablene gir en omfattende innsikt i både boligkarakteristika og salgsdetaljer for perioden 2014-2015. Vi la til en variabel som angir avstand i km til CBD i Seattle og endret kartprojeksjonen til EPSG 2926.</p>
</section>
<section id="wadoh-environmental-health-disparities-index-calculated-for-king-county" class="level2">
<h2 class="anchored" data-anchor-id="wadoh-environmental-health-disparities-index-calculated-for-king-county">2.2 WADOH Environmental Health Disparities Index Calculated for King County</h2>
<p>I datsettet <em>House Sales in King County, USA</em> fra Kaggle mangler det variabler som beskriver området hvor boligene ligger. Denne informasjonen henter vi fra datasettet <em>WADOH Environmental Health Disparities Index calculated for King County</em>, utarbeidet av Washington State Department of Health. Datasettet inneholder en EHD-indeks, og variablene denne indeksen er utarbeidet fra, for alle “cencus tracts” i King County. Vi endret også projeksjonen på dette kartet til EPSG 2926.</p>
</section>
<section id="cencus-shapefile-og-tracts10" class="level2">
<h2 class="anchored" data-anchor-id="cencus-shapefile-og-tracts10">2.3 Cencus shapefile og tracts10</h2>
<p>Vi benyttet også flere datasett fra en cencus shapefil for King County, utarbeidet av King County GIS. Vi hentet data om samlet familie inntekt fra datafilen <em>acs_b19101_familyincome.dbf</em> og opplysninger om etnisitet fra datasettet <em>acs_b02001_race.dbf.</em> Disse to datasettene gir informasjon om familie inntekt og etnisitet på “cencus-tracts”-nivå. Vi brukte disse to datasettene til å lage variabler som vi la til i WADOH-datasettet. Fra cencus shapefilen lastet vi også ned kartet <em>tracts10</em>. Vi la variablene fra WADOH-datasettet in i <em>tracts10</em>. Videre gjorde vi en spatial join med hus-datene fra Kaggle for å binde områdevariablene til de respektive boligene. Vi benyttet projeksjonen EPSG 2926 for alle kartene.</p>
</section>
</section>
<section id="exploratory-data-analysis-eda" class="level1">
<h1><strong>3.0 Exploratory Data Analysis (EDA)</strong></h1>
<p>Vi har gjennomført en Exploratory Data Analysis (EDA) av dataene i Geoda. Her har vi generert en vektfil ut fra 3 og 10 nærmeste naboer og brukt <em>Bivariate Moran`s I</em> til å undersøke romlig autokorrelasjon mellom pris og boareal (sqft_living). Vi har også brukt <em>Bivariate Local Morans I</em> for å finne ut hvor de små og dyre, store og dyre, billige og store, og de små og billige boligene ligger.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/Skjermbilde%202024-11-05%20kl.%2011.11.56.png" class="img-fluid figure-img" width="716">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Bivariate Moran’s I for pris og boareal (sqft_living) med 3 og 10 nærmeste naboer
</figcaption>
</figure>
</div>
</div>
</div>
<p>I <a href="#fig-1" class="quarto-xref">Figure&nbsp;1</a> ovenfor ser vi at Bivariate Moran’s I har en verdi på 0.406 for de 3 nærmeste naboene og en noe lavere verdi på 0.353 når vi utvidet til de 10 nærmeste naboene. Begge verdiene er positive, noe som indikerer en romlig autokorrelasjon mellom pris og boareal (sqft_living). Dette innebærer at boliger med høy pris har en tendens til å ligge nær andre boliger med høyt boareal, mens boliger med lav pris har en tendens til å ligge nær boliger med lavt boareal. At autokorrelasjonen avtar noe når vi utvider antall naboer, kan tyde på at sammenhengen mellom pris og boareal er sterkest lokalt. Dette antyder at relasjonen mellom pris og boareal er mer markant i nærområder, men svekkes over lengre avstander.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/Skjermbilde%202024-11-05%20kl.%2012.04.41.png" class="img-fluid figure-img" width="635">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Bivariate Local Moran’s I for pris og boareal (sqft_living) med 3 og 10 nærmeste naboer illustrert ved LISA Cluster map
</figcaption>
</figure>
</div>
</div>
</div>
<p>I <a href="#fig-2" class="quarto-xref">Figure&nbsp;2</a> har vi brukt <em>Bivariate Local Morans I</em> for å finne ut hvor de små og dyre, store og dyre, store og billige, og de små og billige boligene ligger. Dette illustreres ved hjelp av et LISA cluster map. Kartet til venstre viser fordelingen for 3 nærmeste naboer, mens kartet til høyre viser fordelingen for 10 nærmeste naboer. De to kartene er relativt like og vi kan se lignende mønster. Ut i fra disse kartene er det tydelig at for både 3 og 10 nærmeste naboer er store og dyre boliger er konsentrert nord i King County, det samme gjelder for små og dyre boliger. Dette reflekterer “hot spots” hvor dyre boliger samles. Det kommer også frem fra kartene at det er flere store og dyre boliger enn det er små og dyre boliger. Når det kommer til billige boliger, er disse mer jevnt fordelt enn de dyre. Sør i King County er det overvekt av billige boliger. Store og billige, samt små og billige boliger er utbredt i sør, noe som kan tyde på “cold spots” hvor fattige eller mindre attraktive nabolag er utbredt.</p>
</section>
<section id="hedoniske-modeller" class="level1">
<h1><strong>4.0 Hedoniske modeller</strong></h1>
<p>Hedoniske modeller brukes for å estimere boligpriser basert på spesifikke egenskaper som boligens størrelse, beliggenhet, nærhet til fasiliteter, samt miljømessige kvaliteter som luftkvalitet og støy. Ved å analysere hvordan disse faktorene påvirker salgspriser, kan vi finne den implisitte prisen av hver egenskap. Vi skal i dette kapittelet definere tre hedoniske modeller.</p>
<p>Den første modellen er en null modell med bare huskarakteristika og tids-dummier. Den andre modellen inkluderer huskarakteristika, distanse til CBD, relevante tract-variabler (transport og poverty) og tids-dummier. Den tredje modellen inkluderer huskarakteristika, distanse til CBD, EHD indeks og tids-dummier.</p>
<p><span class="math inline">\(P_i = \beta_0 + \beta_1 \cdot \text{bedrooms}_i + \beta_2 \cdot \text{bathrooms}_i + \beta_3 \cdot \text{sqft\_living}_i + \beta_4 \cdot \text{sqft\_lot}_i + \beta_5 \cdot \text{floors}_i + \beta_6 \cdot \text{year\_month}_i + \epsilon_i\)</span></p>
<p><span class="math display">\[P_i = \beta_0 + \beta_1 \cdot \text{bedrooms}_i + \beta_2 \cdot \text{bathrooms}_i + \beta_3 \cdot \text{sqft\_living}_i + \beta_4 \cdot \text{sqft\_lot}_i + \beta_5 \cdot \text{floors}_i + \beta_6 \cdot \text{distCBD}_i + \beta_7 \cdot \text{transport}_i + \beta_8 \cdot \text{poverty}_i + \beta_{9j} \cdot \text{year\_month}_i + \epsilon_i\]</span></p>
<p><span class="math inline">\(P_i = \beta_0 + \beta_1 \cdot \text{bedrooms}_i + \beta_2 \cdot \text{bathrooms}_i + \beta_3 \cdot \text{sqft\_living}_i + \beta_4 \cdot \text{sqft\_lot}_i + \beta_5 \cdot \text{floors}_i + \beta_6 \cdot \text{distCBD}_i + \beta_7 \cdot \text{EHDindex}_i + \beta_8 \cdot \text{year\_month}_i + \epsilon_i\)</span></p>
<section id="regresjonstabell" class="level2">
<h2 class="anchored" data-anchor-id="regresjonstabell">4.1 Regresjonstabell</h2>
<div class="cell" data-ft.arraystretch="0.9">
<div id="tbl-1" class="cell quarto-float anchored" data-ft.arraystretch="0.9">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Regresjonstabell for de tre ulike hedoniske modellene
</figcaption>
<div aria-describedby="tbl-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-fb3b6a1c{}.cl-fb2985ea{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-fb31f25c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-fb31f270{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 0.3;background-color:transparent;}.cl-fb324e96{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-fb324eaa{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-fb324eb4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-fb3b6a1c"><thead><tr style="overflow-wrap:break-word;"><th class="cl-fb324e96"><p class="cl-fb31f25c"><span class="cl-fb2985ea"> </span></p></th><th class="cl-fb324e96"><p class="cl-fb31f25c"><span class="cl-fb2985ea">Modell 1</span></p></th><th class="cl-fb324e96"><p class="cl-fb31f25c"><span class="cl-fb2985ea">Modell 2</span></p></th><th class="cl-fb324e96"><p class="cl-fb31f25c"><span class="cl-fb2985ea">Modell 3</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(Intercept)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">79893.490***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">845500.071***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">405315.746***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(8.118)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(31.295)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(45.066)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">bedrooms</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-59606.355***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-49195.378***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-46342.134***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-25.021)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-24.540)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-23.306)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">bathrooms</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">6795.037+</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">19338.314***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">20288.528***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(1.762)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(5.961)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(6.316)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">sqft_living</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">315.571***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">294.543***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">288.133***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(99.650)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(108.515)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(108.069)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">sqft_lot</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-0.399***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">0.428***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">0.223***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-8.770)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(10.824)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(5.704)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">floors</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-3785.107</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-22766.366***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-18888.026***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-0.992)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-7.042)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-5.948)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2014-06</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">6015.759</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">10562.394</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">11027.366</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(0.719)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(1.505)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(1.587)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2014-07</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-7287.796</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">2932.383</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">3230.760</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-0.875)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(0.420)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(0.467)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2014-08</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-2472.900</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">8832.195</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">7152.294</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-0.288)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(1.226)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(1.002)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2014-09</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-7838.399</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">2520.796</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">1669.215</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-0.892)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(0.342)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(0.229)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2014-10</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">643.829</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">7249.104</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">9102.974</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(0.074)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(0.998)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(1.265)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2014-11</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-7658.061</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-2033.165</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-178.541</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-0.822)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-0.260)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-0.023)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2014-12</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-16854.808+</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-1382.891</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-127.009</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-1.833)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-0.179)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-0.017)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2015-01</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-12714.538</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">3829.449</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">8256.888</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-1.222)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(0.439)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(0.955)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2015-02</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-12149.568</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">10768.049</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">15466.226+</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-1.262)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(1.333)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(1.933)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2015-03</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">24034.109**</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">38092.481***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">40551.732***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(2.783)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(5.258)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(5.650)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2015-04</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">29222.396***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">37461.977***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">39250.975***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(3.522)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(5.381)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(5.692)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">year_month2015-05</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">34683.499**</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">48236.175***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">51566.411***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(2.894)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(4.797)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(5.177)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">dist_cbd[, 1]</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-9749.342***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-12277.122***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-44.666)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-84.535)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">transporta</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-23895.013***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-17.986)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">poverty_pe</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-7491.906***</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-40.361)</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">EHD_percen</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-2575.047***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea"></span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">(-46.591)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">Num.Obs.</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">21200</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">21200</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">21200</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">R2</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">0.510</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">0.655</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">0.662</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">R2 Adj.</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">0.510</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">0.655</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">0.661</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">AIC</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">588488.8</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">581042.0</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">580636.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">BIC</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">588640.0</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">581217.1</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">580804.1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">Log.Lik.</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-294225.378</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-290498.985</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">-290297.438</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">F</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">1297.057</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">2012.817</span></p></td><td class="cl-fb324eaa"><p class="cl-fb31f270"><span class="cl-fb2985ea">2180.926</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-fb324eb4"><p class="cl-fb31f270"><span class="cl-fb2985ea">RMSE</span></p></td><td class="cl-fb324eb4"><p class="cl-fb31f270"><span class="cl-fb2985ea">257716.91</span></p></td><td class="cl-fb324eb4"><p class="cl-fb31f270"><span class="cl-fb2985ea">216175.05</span></p></td><td class="cl-fb324eb4"><p class="cl-fb31f270"><span class="cl-fb2985ea">214129.63</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td colspan="4" class="cl-fb324eb4"><p class="cl-fb31f25c"><span class="cl-fb2985ea">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</span></p></td></tr></tfoot></table></div>
</div>
</div>
</figure>
</div>
</div>
<p>En regresjonstabell for de tre hedoniske modellene er gitt i <a href="#tbl-1" class="quarto-xref">Table&nbsp;1</a> . I modell 1, som kun inkluderer huskarakteristika og tidsdummier, er antall soverom negativt assosiert med boligprisene (-59,606.36), boliger med flere soverom har lavere priser. Antall bad har en positiv effekt (6,795.04), og større boareal øker prisen (315.57). Tomtestørrelse har en negativ effekt på -0.399, mens antall etasjer ikke har en signifikant innvirkning på prisene. T-verdiene for huskarakteristikaene er alle høye, noe som indikerer at disse er signifikante, mens antall etasjer ikke er signifikant (t-verdi er lav). Når det gjelder tidsdummier, viser resultatene at prisene varierer betydelig fra måned til måned, med noen måneder som har positive effekter på prisen, mens andre har en negativ effekt. Mai 2014 er referansemåneden, noe som betyr at alle de andre dummykoeffisientene i modellen viser prisforskjellen sammenlignet med mai 2014. Det er få av tidsdummiene som er signifikante, noe som gjelder for alle modellene.</p>
<p>Modell 2 som inkluderer distanse til CBD, transport og fattigdom, viser at boliger lengre unna sentrum har lavere priser (-9,749.34), mens dårligere transport og høyere fattigdom reduserer boligprisene (-23,895.01 og -7,491.91). T-verdiene for disse variablene er høye, noe som betyr at de har en signifikant innvirkning på boligprisene. Resultatene viser også at flere soverom (-49,195.38) reduserer prisen, mens flere bad (19,338.31) og større boareal (294.54) øker prisen. Større tomt (0.43) har også en positiv effekt, men med mindre innvirkning enn boareal. Flere etasjer (-22,766.37) ser ut til å redusere prisen. Alle koeffisientene for huskrakteristika har høy T-verdi. Tidsdummiene for 2015 viser igjen variasjon i boligprisene.</p>
<p>Modell 3 som inkluderer EHD-indeksen, viser at dårligere miljøforhold er assosiert med lavere boligpriser (-2,575.05). T-verdien for miljøindeksen er relativt høy, som indikerer at den er signifikant. De andre koeffisientene for huskarakteristika, som soverom, bad, boareal, og tomtestørrelse, er stort sett konsistente med de tidligere modellene, og har signifikante t-verdier.. Tidsdummiene i modell 3 viser også variasjon i boligprisene gjennom året, med noen måneder som har en positiv effekt på prisene, mens andre måneder har en negativ effekt på prisene.</p>
</section>
<section id="sammenligning-av-de-tre-modellene-hvilken-er-best" class="level2">
<h2 class="anchored" data-anchor-id="sammenligning-av-de-tre-modellene-hvilken-er-best">4.2 Sammenligning av de tre modellene Hvilken er best?</h2>
<p><strong>R² og justert R²</strong></p>
<p>Modell 1 har den laveste R² og justert R², noe som tyder på at den forklarer minst av variasjonen i dataene. Modell 2 har en betydelig høyere R²og justert R² enn modell 1, noe som indikerer en bedre forklaringsevne. Modell 3 har den høyeste R² og justert R², som tyder på at den gir den beste forklaringen av boligprisene blant de tre modellene. Basert på R² og justert R² ser Modell 3 ut til å være den mest pålitelige av de tre, da den forklarer mest av variasjonen i boligprisene.</p>
<p><strong>AIC og BIC</strong></p>
<p>Model 1 har en AIC-verdi på 588488.8, mens model 2 har en AIC-verdi på 581042.0. Model 3 har den laveste AIC-verdien på 580636.9. Lavere AIC-verdi betyr at model 3 er å foretrekke over model 1 og model 2, siden den gir en bedre balanse mellom tilpasning og kompleksitet.</p>
<p>Model1 har en BIC-verdi på 588640.0, model 2 har en BIC-verdi på 581217.1, og model 3 har den laveste BIC-verdien på 580804.1.BIC-verdi følger samme prinsipp som AIC: lavere verdier er bedre. Også her har model 3 den laveste verdien, noe som indikerer at model 3 er den beste modellen av de tre når man også tar hensyn til modellens kompleksitet.</p>
<p><strong>Log-likelihood</strong></p>
<p>Log-likelihood er en måling av modellens sannsynlighet; høyere log-likelihood er bedre. Modell 3 har høyest log-likelihood med en verdi på -290297.438, som betyr at den gir best tilpasning til dataene sammenlignet med de andre modellene.</p>
<p><strong>F-verdi</strong></p>
<p>F-verdien indikerer hvor godt modellen samlet sett forklarer variasjonen i boligprisene. Fra tabellen ser vi at F-verdien øker fra modell 1 (1297.057) til modell 3 (2180.926), noe som tyder på at den siste modellen har er best. Denne økningen i F-verdien fra modell 1 til modell 3 indikerer at når vi inkluderer flere variabler forbedres modellens forklaringskraft betraktelig.</p>
<p><strong>RMSE</strong></p>
<p>RMSE (Root Mean Squared Error) viser gjennomsnittlig avvik mellom de faktiske og de predikerte boligprisene. Den faller fra modell 1 (257716.91) til modell 3 (214129.63), noe som betyr at Modell 3 gir de mest presise prediksjonene og har lavest feilmargin.</p>
<p><strong>Konklusjon</strong></p>
<p>Modell 3 ser ut til å være den mest pålitelige og presise modellen. Modell 3 har den høyeste R² og justert R², noe som indikerer at den forklarer mest av variasjonen i prisene. I tillegg har modell 3 de laveste AIC- og BIC-verdiene, som viser at modellen gir en god balanse mellom kompleksitet og tilpasning. Med høyest log-likelihood og en betydelig forbedret F-verdi, er modell 3 også bedre tilpasset dataene enn de andre modellene. Modell 3 har også den laveste RMSE-verdien, noe som tyder på at den gir de mest presise prediksjonene med minst avvik fra de faktiske boligprisene.</p>
</section>
<section id="residualanalyse" class="level2">
<h2 class="anchored" data-anchor-id="residualanalyse">4.3 Residualanalyse</h2>
<p>Videre utføres en residual- og diagostikkanalyse for å vurdere modellens egenskaper ytterligere. Vi skal se nærmere på de fire plottene; “Residuals vs Fitted”, “Q-Q Residuals”, “Scale-Location” og “Residuals vs Leverage” for de tre hedoniske modellene. <a href="#fig-3" class="quarto-xref">Figure&nbsp;3</a> presenterer de fire plottene for modell 1, mens <a href="#fig-4" class="quarto-xref">Figure&nbsp;4</a> viser de samme plottene for modell 2, og til slutt gir <a href="#fig-5" class="quarto-xref">Figure&nbsp;5</a> en presentasjon av de fire plottene for modell 3.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-3-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Residual- og diagnostikkplott for Modell 1
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-4" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-4-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Residual- og diagnostikkplott for Modell 2
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-5" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-5-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Residual- og diagnostikkplott for Modell 3
</figcaption>
</figure>
</div>
</div>
</div>
<p><strong>Residuals vs Fitted</strong></p>
<p>Dette plottet viser forholdet mellom residualene og de tilpassede verdiene. Et godt tilpasset lineært forhold skal vise en tilfeldig fordeling av punktene rundt null-linjen, uten tydelige mønstre. I alle modellene ser vi litt avvik fra en helt jevn fordeling. For noen av modellene, spesielt modell 1, kan vi se noen mønstre som tyder på at modellen ikke helt fanger opp alle aspekter av dataene. Modell 3 ser ut til å ha en jevnere fordeling enn de andre modellene, noe som indikerer at denne modellen kan ha en bedre tilpasning.</p>
<p><strong>Q-Q Residuals</strong></p>
<p>Q-Q-plottet viser om residualene er normalfordelte ved å plotte de standardiserte residualene mot de teoretiske kvantilene for en normalfordeling. I alle modellene ser vi at noen punkter, spesielt i ytterkantene, avviker betydelig fra den teoretiske linjen. Dette indikerer at det er enkelte avvik eller “outliers” som ikke følger normalfordelingen. Modell 3 ser ut til å ha litt færre avvik enn de andre modellene, men det er fortsatt tegn på at noen residualer ikke er helt normalfordelte.</p>
<p><strong>Scale-Location</strong></p>
<p>Dette plottet viser kvadratroten av de standardiserte residualene mot de tilpassede verdiene. En jevn fordeling av punktene langs null-linjen indikerer homoskedastisitet . I alle modellene ser vi en svak trend der variansen øker med de tilpassede verdiene, noe som indikerer at det kan være heteroskedastisitet. Modell 3 ser igjen litt bedre ut enn modell 1 og modell 2, men heteroskedastisitet kan fortsatt være et problem.</p>
<p><strong>Residuals vs Leverage</strong></p>
<p>Dette plottet viser hvilke observasjoner som har stor innflytelse på modellen og hvor store residualene er for disse observasjonene. Punkter som ligger langt fra de fleste dataene, og spesielt de som har høy leverage, kan være “influential points” som påvirker modellen betydelig. I alle modellene ser vi noen observasjoner med høy leverage, spesielt i ytterkantene. Cook’s distance-linjene hjelper oss å identifisere punkter med stor påvirkning. For eksempel ser vi noen observasjoner som kan påvirke modellens resultater betydelig. Modell 3 ser ut til å ha færre punkter med høy leverage enn de andre modellene, noe som kan indikere en bedre robusthet mot ekstreme observasjoner.</p>
<p><strong>Konklusjon</strong></p>
<p>Samlet sett gir modell 3 den beste tilpasningen blant de tre, men det er fortsatt noen utfordringer. Den har en jevnere fordeling i Residuals vs Fitted og færre punkter med høy leverage sammenlignet med de andre modellene, noe som indikerer bedre tilpasning. Men normalitet og homoskedastisitet er fortsatt utfordrende for alle modellene, noe som tyder på at det kan være rom for videre forbedring, eventuelt med alternative modeller eller transformasjoner av variablene.</p>
</section>
</section>
<section id="simultan-test-på-tids-dummiene" class="level1">
<h1>5.0 Simultan test på tids-dummiene</h1>
<p>Videre skal vi bruke en simultan test på tids-dummiene i hver av de hedoniske modellene for å avgjøre om vi trenger de.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
====================================
F-statistic p-value Df   F   Pr(&gt; F)
------------------------------------
1           21,194                  
2           21,182  12 5.717    0   
------------------------------------</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Linear hypothesis test:
year_month2014-06
year_month2014-07
year_month2014-08
year_month2014-09
year_month2014-10
year_month2014-11
year_month2014-12
year_month2015-01
year_month2015-02
year_month2015-03
year_month2015-04
year_month2015-05

Model 1: restricted model
Model 2: price ~ bedrooms + bathrooms + sqft_living + sqft_lot + floors + 
    dist_cbd[, 1] + transporta + poverty_pe + year_month

Note: Coefficient covariance matrix supplied.

  Res.Df Df      F    Pr(&gt;F)    
1  21191                        
2  21179 12 8.2016 1.245e-15 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Linear hypothesis test:
year_month2014-06
year_month2014-07
year_month2014-08
year_month2014-09
year_month2014-10
year_month2014-11
year_month2014-12
year_month2015-01
year_month2015-02
year_month2015-03
year_month2015-04
year_month2015-05

Model 1: restricted model
Model 2: price ~ bedrooms + bathrooms + sqft_living + sqft_lot + floors + 
    dist_cbd[, 1] + EHD_percen + year_month

Note: Coefficient covariance matrix supplied.

  Res.Df Df      F    Pr(&gt;F)    
1  21192                        
2  21180 12 9.1943 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p><strong>Model 1</strong></p>
<p><strong>F-verdi</strong>: 5.717</p>
<p><strong>p-verdi</strong>: 6.082e-10 (som er ekstremt lav, mindre enn 0.001)</p>
<p>For Model 1 indikerer den lave p-verdien (p &lt; 0.001) at vi kan avvise nullhypotesen om at alle tids-dummiene samlet er lik null. Dette betyr at tids-dummiene har en signifikant effekt på modellens forklaringskraft, og de bør inkluderes i modellen.</p>
<p><strong>Model 2</strong></p>
<p><strong>F-verdi</strong>: 8.2016</p>
<p><strong>p-verdi</strong>: 1.245e-15 (også ekstremt lav)</p>
<p>I Model 2 er p-verdien også svært lav, noe som igjen betyr at vi kan avvise nullhypotesen. Tids-dummiene har en signifikant effekt på boligprisene i denne modellen og bør beholdes.</p>
<p><strong>Model 3</strong></p>
<p><strong>F-verdi</strong>: 9.1943</p>
<p><strong>p-verdi</strong>: &lt; 2.2e-16 (enda lavere enn de to foregående modellene)</p>
<p>For Model 3 er resultatet det samme: den lave p-verdien indikerer at tids-dummiene er signifikante for å forklare variasjonen i boligprisene, og derfor bør tids-dummiene inkluderes i modellen.</p>
<p><strong>Konklusjon</strong></p>
<p>For alle tre modellene er p-verdiene ekstremt lave, langt under 0.05, noe som indikerer at tids-dummiene samlet sett har en signifikant effekt på modellene. Med andre ord, tids-dummiene bør inkluderes i alle modellene fordi de bidrar til å forklare variasjonen i boligprisene over tid. Dette betyr at tidsvariasjon er viktig for å modellere boligprisene i dette datasettet.</p>
</section>
<section id="spatial-regressions" class="level1">
<h1><strong>6.0 Spatial Regressions</strong></h1>
<p>Vår guppe sitt datasett kc_house_data_4242.gpkg, laster det ned.</p>
<p>Legger til områdevariablene til det reduserte datasettet</p>
<p>Modellen vi vil bruke:</p>
<p>Kommentar til OLS modellen:</p>
<p><strong>Koeffisienter,</strong> kun tatt med de vi tenker er relevante</p>
<p>• <strong>Bedrooms</strong>: Koeffisienten for antall soverom (-54,050) er signifikant (p &lt; 0.001) og negativ. Dette kan virke kontraintuitivt, men det kan være et tegn på at større boliger med flere soverom har andre karakteristikker som påvirker prisen (som mindre stuer eller eldre boliger).</p>
<p>• <strong>Sqft_living</strong>: Størrelsen på boligen (kvadratfot boareal) har en sterk positiv og signifikant effekt på pris (β = 308.1, p &lt; 0.001). Dette er forventet, ettersom større boliger vanligvis er dyrere.</p>
<p><strong>Sqft_lot:</strong> Størrelsen på tomten har en liten, men signifikant negativ effekt på prisen (β = -0.5161, p &lt; 0.001). Dette kan tyde på at større tomter ikke nødvendigvis øker prisen, kanskje fordi andre faktorer som beliggenhet veier tyngre.</p>
<p><strong>Andel hvit alene</strong>: Denne variabelen er positiv og signifikant (β = 452,600, p = 0.033), noe som indikerer at i områder hvor en større andel av befolkningen er hvit alene, har boliger en tendens til å ha høyere priser.</p>
<p><strong>Andel asiatisk alene</strong>: Denne variabelen har en positiv og signifikant effekt (β = 498,400, p = 0.021), noe som indikerer høyere boligpriser i områder med større andel av asiatisk befolkning.</p>
<p><strong>Modellens forklaringskraft:</strong></p>
<p><strong>R²</strong>: Den multiple R² er 0.5837, noe som betyr at modellen forklarer omtrent 58.4 % av variasjonen i boligprisene. Dette er en moderat god forklaringskraft for en slik modell, men det er fortsatt en betydelig mengde variasjon i prisene som ikke forklares av modellen.</p>
<p><strong>F-test</strong>: F-testen er signifikant (p &lt; 2.2e-16), noe som indikerer at modellen som helhet er statistisk signifikant og at minst én av variablene har en effekt på boligprisene.</p>
<p><strong>Samlet vurdering:</strong></p>
<p>Modellen gir rimelig gode forklaringer på hvordan noen boligkarakteristikker og demografiske variabler påvirker prisene, men det er klart at ikke alle variablene er like viktige. <strong>Sqft_living</strong> er den sterkeste driveren av boligprisene, mens variabler som antall etasjer og bad ikke ser ut til å spille en stor rolle. De demografiske variablene gir noen interessante funn, spesielt effekten av andel hvit alene og andel asiatisk alene, som begge er positive og signifikante. Dette kan gi innsikt i hvordan befolkningssammensetningen i områder kan påvirke boligprisene.</p>
<p><strong>Videre generer vi vektmatrise ut fra k=3 og k=10 nærmeste naboer</strong></p>
<p><strong>Utfører Lagrange Multiplikator-testene</strong></p>
<section id="sar---modell-." class="level2">
<h2 class="anchored" data-anchor-id="sar---modell-.">? SAR - modell …. ?</h2>
<p>Bare midlertidig overskrift for å huska denna koden…..</p>
<p><em>Detta sto i oppgaveteksten: “Vi vil også benytte Anselin (<a href="https://msb205.netlify.app/assignment/kc_h24/assignment_text_24#ref-Anselin1988">1988</a>) angrepsmåte (SAR, SEM og lm (OLS))) med Lagrange Multiplier Tests (gjøres enkelt vha. <code>lm.LMtests(vår_lm, listw = vår_w, test="all")</code> fra pakken <code>spdep</code>. <strong>Vi vil også estimere en SLM (SAR) modell og finne impacts for denne.”</strong></em> &lt;- Pørvde på dette her:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Opprett SAR-modellen</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>sar_model <span class="ot">&lt;-</span> <span class="fu">errorsarlm</span>(price <span class="sc">~</span> bedrooms <span class="sc">+</span> bathrooms <span class="sc">+</span> sqft_living <span class="sc">+</span> sqft_lot <span class="sc">+</span> floors <span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                         andel_hvit_alene <span class="sc">+</span> andel_svart_alene <span class="sc">+</span> andel_asiatisk_alene <span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                         andel_andre_alene,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">data =</span> data_with_area_vars, <span class="at">listw =</span> lw3)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Bruk OLS-modellen for Lagrange Multiplikator tester</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>lm_tests_sar3 <span class="ot">&lt;-</span> <span class="fu">lm.LMtests</span>(model_ols, lw3, <span class="at">test =</span> <span class="st">"all"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Lagrange Multiplikator-tester for SAR-modellen med k=3:"</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lm_tests_sar3)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>lm_tests_sar10 <span class="ot">&lt;-</span> <span class="fu">lm.LMtests</span>(model_ols, lw10, <span class="at">test =</span> <span class="st">"all"</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Lagrange Multiplikator-tester for SAR-modellen med k=10:"</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lm_tests_sar10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Resultat:</p>
<p>Basert på resultatene fra Lagrange Multiplikator-testene med både k=3 og k=10 nærmeste naboer, tyder resultatene på at det finnes betydelig spatial avhengighet i dataene. Dette fremgår av de ekstremt lave p-verdiene for alle testene (p &lt; 2.2e-16), noe som betyr at en vanlig OLS-modell ikke fanger opp alle romlige effekter. Vi må derfor vurdere en spatial modell som kan håndtere disse romlige avhengighetene bedre.</p>
<p>For begge k-verdier (3 og 10), er både <strong>LM-Error</strong>-testen (RSerr) og <strong>Robust LM-Error</strong>-testen (adjRSerr) signifikante. Dette indikerer at en Spatial Error Model (SEM) kan være nødvendig, ettersom denne modellen tar hensyn til spatial avhengighet i feilene. Samtidig er <strong>LM-Lagged</strong>-testen (RSlag) og <strong>Robust LM-Lagged</strong>-testen (adjRSlag) også signifikante, noe som antyder at en Spatial Autoregressive Model (SAR) også kunne være egnet.</p>
<p>Imidlertid, når vi sammenligner de robuste testene, har <strong>Robust LM-Error</strong>-testen en høyere teststatistikk enn <strong>Robust LM-Lagged</strong>-testen i begge tilfeller (k=3 og k=10). Dette indikerer at <strong>SEM-modellen passer bedre</strong> enn SAR-modellen, ettersom de romlige effektene ser ut til å påvirke feilleddet mer enn den avhengige variabelen direkte.</p>
<p><strong>Konklusjon</strong></p>
<p>Samlet sett peker Lagrange Multiplikator-testene mot at en <strong>Spatial Error Model (SEM)</strong> vil være den mest passende modellen for dette datasettet. En SEM-modell vil kunne håndtere den observerte spatial avhengigheten ved å modellere romlige effekter i feilkomponenten, noe som sannsynligvis gir en bedre forståelse og kontroll av romlige mønstre i boligprisene enn en SAR- eller OLS-modell ville ha gjort.</p>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"></h3>
<p><strong>Lokalt eller globalt fenomen?</strong></p>
<p>Siden testene viser betydelig spatial avhengighet på både lokale og større skalaer (k=3 og k=10 nærmeste naboer), og SEM-modellen (Spatial Error Model) er identifisert som den mest passende for å fange opp disse effektene, peker dette tydelig mot et globalt fenomen. Med andre ord, de romlige effektene påvirker boligprisene på et bredt geografisk nivå, noe som indikerer at boligprisene i et område ikke bare påvirkes av umiddelbare naboboliger, men av strukturer og forhold som strekker seg over hele regionen.</p>
<p>SEM-modellen fanger opp den romlige avhengigheten som eksisterer i feilleddet, noe som antyder at det er underliggende faktorer som påvirker boligprisene i store deler av området, faktorer som ikke nødvendigvis direkte påvirker den avhengige variabelen (boligprisene), men som likevel skaper et romlig mønster. Dette kan inkludere bredere økonomiske forhold, sosioøkonomiske mønstre, eller infrastrukturelle påvirkninger som fanges opp i feilleddet. Det globale aspektet understrekes av det faktum at spatial avhengighet observeres både blant nærmeste naboer og over større avstander (k=10), noe som bekrefter at romlige effekter har en vidstrakt innvirkning på boligmarkedet.</p>
<p><strong>Likelihood Ratio Test:</strong></p>
<p>Denne type test brukes til å sammenligne to modeller for å vurdere om den mer komplekse modellen gir en signifikant forbedring i modelltilpasning. I dette tilfellet har alle de romlige modellene (SEM, SDEM og SLX) signifikant lavere AIC og høyere log-likelihood enn OLS-modellen, noe som indikerer at de passer bedre til dataene.</p>
<p><strong>Sammenligning av modellene:</strong></p>
<p>SEM-modellen (AIC = 51 436) og SLX-modellen (AIC = 51 409) har begge lavere AIC-verdier enn SDEM-modellen (AIC = 51,502). AIC er et mål på modellens kvalitet, der lavere verdier indikerer en bedre modell som balanserer god tilpasning og modellkompleksitet.</p>
<p>SLX-modellen har den laveste AIC (51 409), noe som antyder at den gir den beste balansen mellom modelltilpasning og kompleksitet sammenlignet med de andre modellene. Log-likelihood er også høyest for SLX-modellen (-25,683.28), som bekrefter at den gir den beste tilpasningen til dataene.</p>
<p><strong>Konklusjon:</strong></p>
<p>Basert på AIC, log-likelihood, og likelihood ratio test ser SLX-modellen ut til å være den beste modellen for dette datasettet, siden den har den laveste AIC og høyeste log-likelihood. Selv om SEM-modellen også gir en betydelig forbedring i forhold til OLS og SDEM-modellen, indikerer AIC og log-likelihood at SLX-modellen gir den beste balansen mellom tilpasning og kompleksitet.</p>
<p><strong>Bergener residualene for modellene:</strong></p>
<p><strong>Bruker “moran plot” på residualene fra de ulike modellene for å illustrere hvor godt hver modell fjerner «spatial effects» fra residualene.</strong></p>
<p>For å evaluere hvor godt de ulike modellene (OLS, SEM, SAR, SDEM og SLX) håndterer spatial autokorrelasjon i boligprisdataene, har vi benyttet <strong>Moran’s I-plot</strong> på residualene fra hver modell med k=10 nærmeste naboer. Moran-plottene gir oss innsikt i hvorvidt modellene klarer å fjerne romlige effekter fra residualene og dermed oppnå en modelltilpasning som ikke er påvirket av spatial autokorrelasjon.</p>
<p><strong>OLS-modellen</strong>: Moran-plot for OLS-residualene viser tydelig spatial autokorrelasjon. Punktene i plottet er sterkt gruppert, spesielt rundt første og tredje kvadrant, som indikerer positiv romlig korrelasjon mellom residualene. Dette antyder at OLS-modellen ikke håndterer den romlige avhengigheten, noe som resulterer i at romlig strukturerte feil fortsatt er til stede. Den stigende linjen i plottet bekrefter at det er en romlig sammenheng mellom residualene, som indikerer behov for en modell som kan håndtere denne romlige avhengigheten.</p>
<p><strong>SEM-modellen (Spatial Error Model)</strong>:</p>
<p>Moran-plot for SEM-residualene viser en klar forbedring sammenlignet med OLS. Residualene er mer spredt, og det er mindre tydelig clustering i første og tredje kvadrant. Dette indikerer at SEM-modellen har klart å fange opp en stor del av den spatial autokorrelasjonen som var til stede i OLS-modellen.</p>
<p>Den fladere linjen i plottet viser at det er mindre romlig autokorrelasjon igjen i residualene, noe som tyder på at SEM-modellen har vært effektiv i å redusere romlig avhengighet i feilene.</p>
<p><strong>SDEM-modellen (Spatial Durbin Error Model)</strong>:</p>
<p>Moran-plot for SDEM-residualene viser et lignende mønster som SEM-modellen, med spredte residualer og mindre clustering. Dette bekrefter at også SDEM-modellen håndterer spatial autokorrelasjon godt, og at den fanger opp både direkte og indirekte romlige effekter.</p>
<p>Linjen i plottet er fortsatt noe stigende, men det er færre ekstreme verdier sammenlignet med OLS. SDEM-modellen ser ut til å være minst like effektiv som SEM i å håndtere romlige avhengigheter.</p>
<p><strong>SLX-modellen (Spatial Lag of X Model)</strong>:</p>
<p>Moran-plot for SLX-residualene viser at modellen klarer å redusere noe av den spatial autokorrelasjonen, men ikke i like stor grad som SEM eller SDEM. Det er fortsatt en viss clustering synlig, spesielt i første og tredje kvadrant, noe som tyder på at SLX-modellen ikke fullt ut håndterer romlig avhengighet i dataene. Sammenlignet med OLS er SLX en forbedring, men den flate linjen er ikke like tydelig som i SEM- eller SDEM-plottene. Dette indikerer at SLX-modellen er mindre effektiv når det gjelder å fjerne spatial autokorrelasjon i residualene.</p>
<p><strong>Konklusjon:</strong></p>
<p>Konklusjonen er at <strong>SEM og SDEM-modellene</strong> fjerner spatial autokorrelasjon best, med SEM som en lett overlegen modell, mens <strong>OLS</strong> sliter mest med å håndtere de romlige effektene. <strong>SLX-modellen</strong> klarer å redusere noe av den spatial avhengigheten, men ikke i like stor grad som SEM og SDEM.</p>
</section>
</section>
</section>
<section id="diskusjon-av-resultatene" class="level1">
<h1><strong>7.0 Diskusjon av resultatene</strong></h1>
<p>For denne diskusjonen vil vi fokusere på den hedoniske boligprismodellen, som er en metode for å estimere implisitte priser på boligens egenskaper, slik som størrelse, beliggenhet og sosioøkonomiske faktorer. Hver modell (OLS, SEM, SAR (?), SLX og SDEM) har blitt brukt for å undersøke hvordan disse egenskapene påvirker boligprisene, og gir oss innsikt i ulike aspekter av romlige avhengigheter.</p>
<ul>
<li><p><strong>Økonomisk tolkning av den hedoniske boligprismodellen</strong></p>
<p>Den hedoniske modellen antar at boligens pris er et resultat av dens unike egenskaper. Modellen dekomponerer prisen slik at vi kan se hvor mye av prisen som skyldes spesifikke attributter, som antall soverom, boligstørrelse, og lokalsamfunnets egenskaper. I en hedonisk boligprismodell betyr koeffisientene de implisitte prisene på de enkelte egenskapene. For eksempel vil en positiv koeffisient for “sqft_living” indikere at større boliger, alt annet likt, er forbundet med høyere priser.</p>
<p>Vi kan illustrere denne tolkningen ved å lage en graf som viser sammenhengen mellom en boligs pris og noen utvalgte egenskaper.</p>
<p><strong>Grafisk presentasjon :</strong></p>
<p><strong>OLS:</strong></p>
<p>Begge disse grafene illustrerer sammenhengen mellom boligstørrelse målt i kvadratfot (sqft_living) og pris, men med ulike visuelle tilnærminger og fokus. Den røde grafen viser faktiske datapunkter, noe som gir en klar visuell representasjon av spredningen og variasjonen i dataene. Dette kan hjelpe oss med å forstå variasjonen i prisene og hvordan de fordeler seg over forskjellige størrelser på boliger. Den blå grafen viser regresjonslinjen tydelig, noe som illustrerer den gjennomsnittlige effekten av boligstørrelse på pris som modellen estimerer. Dette er nyttig for å fremheve modellens prediksjoner og vise hvor godt modellen passer med de faktiske dataene.</p>
<p>Resultatene fra OLS-modellen indikerer en betydelig romlig autokorrelasjon i residualene, noe som er bekreftet av Moran-plottet. Dette plottet viser at residualene fra OLS-modellen har en klar clustering i både første og tredje kvadrant, noe som tyder på at feilene ikke er uavhengige, men snarere er romlig strukturert. Denne romlige avhengigheten kan påvirke prediksjonene og indikere at OLS-modellen ikke er tilstrekkelig til å håndtere de romlige aspektene av dataene.</p>
<p>Grafen som viser “Effekt av sqft_living på pris i OLS-modellen” viser en tydelig lineær sammenheng mellom sqft_living og pris, men de spredte residualene antyder at det finnes ukjente faktorer som påvirker boligprisene. I tillegg kan det observeres at avvik fra regresjonslinjen er til stede, noe som ytterligere underbygger behovet for en modell som kan ta hensyn til romlige effekter.</p>
<p><strong>SEM:</strong></p>
<p>Her ønsker vi å sammenligne OLS og SEM da dette gir grafene en dypere forståelse av hvordan boligprisene reagerer på endringer i boligens størrelse, samtidig som man tar hensyn til både ikke-romlige og romlige aspekter.</p>
<p>Resultatene fra SEM-modellen viser en klar forbedring sammenlignet med OLS-modellen, som fremgår tydelig i Moran-plottet for residualene. Dette plottet indikerer en reduksjon i romlig autokorrelasjon, da residualene nå er mer spredt ut, med mindre clustering i de første og tredje kvadrantene. Dette antyder at SEM-modellen har vært effektiv i å fange opp de romlige avhengighetene som OLS-modellen ikke klarte.</p>
<p>Grafen som illustrerer “Effekt av sqft_living på pris i SEM-modellen” bekrefter den positive sammenhengen mellom boligstørrelse og pris, men gir også inntrykk av at residualene er mer tilfeldig fordelt rundt regresjonslinjen. Den flate linjen i Moran-plottet for SEM-residualene viser at romlig autokorrelasjon har blitt betydelig redusert, noe som tyder på at modellen har adressert de romlige effektene på en bedre måte enn OLS.</p>
<p>Disse funnene bekrefter at SEM-modellen er bedre rustet til å håndtere romlige effekter, og at den gir mer pålitelige estimater for boligpriser.&nbsp;</p>
<p><strong><em>Her prøver jeg å illustrere SLX men får det ikke til…..</em></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sjekk hvilke variabler som finnes i numeric_vars og relevant_coefficients</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Variabler i numeric_vars:"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(numeric_vars)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Variabler i relevant_coefficients:"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">names</span>(relevant_coefficients))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Sjekk at relevant_coefficients har riktig lengde etter filtrering</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Lengde av relevant_coefficients:"</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">length</span>(relevant_coefficients))</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Prøv på nytt å beregne prediksjoner hvis alt ser riktig ut</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(relevant_coefficients) <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;&amp;</span> <span class="fu">ncol</span>(numeric_data) <span class="sc">==</span> <span class="fu">length</span>(relevant_coefficients)) {</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  data_with_area_vars<span class="sc">$</span>predicted_slx <span class="ot">&lt;-</span> numeric_data <span class="sc">%*%</span> relevant_coefficients</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Feil: Mangler felles variabler for prediksjonen."</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Skriv ut alle kolonnenavn i data_with_area_vars</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Kolonnenavn i data_with_area_vars:"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">colnames</span>(data_with_area_vars))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Skriv ut alle navn i slx_coefficients</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Navn i slx_coefficients:"</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">names</span>(slx_coefficients))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fjern prefikset 'lag.' fra navnene i slx_coefficients</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(slx_coefficients) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"^lag</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, <span class="fu">names</span>(slx_coefficients))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Finn felles variabler mellom slx_coefficients og data_with_area_vars</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>common_vars <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">names</span>(slx_coefficients), <span class="fu">colnames</span>(data_with_area_vars))</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Sjekk at vi har felles variabler</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(common_vars) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filtrer data og koeffisienter basert på felles variabler</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  numeric_data <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(data_with_area_vars[, common_vars])</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  relevant_coefficients <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(slx_coefficients[common_vars])</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Kontroller dimensjoner og utfør multiplikasjonen</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">dim</span>(numeric_data))</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">length</span>(relevant_coefficients))</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  data_with_area_vars<span class="sc">$</span>predicted_slx <span class="ot">&lt;-</span> numeric_data <span class="sc">%*%</span> relevant_coefficients</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Feil: Mangler felles variabler for prediksjonen."</span>)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Begrens numeric_vars til variablene som også finnes i relevant_coefficients</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>numeric_vars <span class="ot">&lt;-</span> <span class="fu">intersect</span>(numeric_vars, <span class="fu">names</span>(relevant_coefficients))</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ekstraher bare de numeriske kolonnene som matcher relevant_coefficients</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>numeric_data <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(data_with_area_vars[, numeric_vars])</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Forsikre oss om at relevant_coefficients er en numerisk vektor</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>relevant_coefficients <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(relevant_coefficients[numeric_vars])</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Sjekk dimensjoner og utfør multiplikasjonen</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">dim</span>(numeric_data))</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">length</span>(relevant_coefficients))</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Beregn prediksjoner manuelt basert på felles variabler</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>data_with_area_vars<span class="sc">$</span>predicted_slx <span class="ot">&lt;-</span> numeric_data <span class="sc">%*%</span> relevant_coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Hent koeffisientene fra SLX-modellen</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>slx_coefficients <span class="ot">&lt;-</span> <span class="fu">coef</span>(SLX)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifiser variablene som finnes både i data og i SLX-koeffisientene, og sjekk at de er numeriske</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>common_vars <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">names</span>(slx_coefficients), <span class="fu">colnames</span>(data_with_area_vars))</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>numeric_vars <span class="ot">&lt;-</span> common_vars[<span class="fu">sapply</span>(data_with_area_vars[common_vars], is.numeric)]</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Ekstraher bare de numeriske kolonnene og konverter til en numerisk matrise</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>numeric_data <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(data_with_area_vars[, numeric_vars])</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Beregn prediksjoner manuelt</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>data_with_area_vars<span class="sc">$</span>predicted_slx <span class="ot">&lt;-</span> numeric_data <span class="sc">%*%</span> slx_coefficients[numeric_vars]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Selv om jeg ikke fikk til å illustrere grafisk denne modellen diskuteres her resultatene fra 6.0:</em></p>
<p>Moran-plottet for SLX-residualene viser en forbedring i forhold til OLS, men modellen klarer ikke å redusere romlig autokorrelasjon i like stor grad som SDEM og SEM. Det er fortsatt synlig clustering av residualene, noe som indikerer at SLX ikke fullt ut adresserer romlige avhengigheter. Den stigende linjen i plottet viser at det fortsatt er romlige strukturer i residualene, og dermed er SLX-modellen mindre effektiv i å håndtere disse.</p>
<p>Når vi sammenligner SLX med SDEM, er SLX-modellen en forbedring over OLS, men den flate linjen i Moran-plottet for SLX er ikke like tydelig som i SDEM-plottet. Dette indikerer at selv om SLX bidrar til å redusere romlige avhengigheter, er den ikke i stand til å fjerne dem helt.</p>
<p><strong><em>Her prøver jeg å illustrere SDEM men får det ikke til…..</em></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sjekk at SDEM er tilgjengelig og at riktig vektingsliste brukes</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">exists</span>(<span class="st">"SDEM"</span>) <span class="sc">&amp;&amp;</span> <span class="fu">exists</span>(<span class="st">"lw3"</span>)) {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    predicted_sdem <span class="ot">&lt;-</span> <span class="fu">predict</span>(SDEM, <span class="at">newdata =</span> data_with_area_vars, <span class="at">listw =</span> lw3)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    data_with_area_vars<span class="sc">$</span>predicted_sdem <span class="ot">&lt;-</span> predicted_sdem</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Sørg for at både SDEM-modellen og lw3 er riktig definert."</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot som viser faktiske priser og SDEM prediksjoner</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_with_area_vars, <span class="fu">aes</span>(<span class="at">x =</span> sqft_living)) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> price), <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"gray"</span>) <span class="sc">+</span>  <span class="co"># Viser faktiske priser</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> predicted_sdem, <span class="at">color =</span> <span class="st">"SDEM Model"</span>), <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="co"># Viser SDEM prediksjoner</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Effekt av sqft_living på pris i SDEM-modellen"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Boligstørrelse (sqft)"</span>, <span class="at">y =</span> <span class="st">"Pris"</span>) <span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"SDEM Model"</span> <span class="ot">=</span> <span class="st">"red"</span>)) <span class="sc">+</span>  <span class="co"># Endre fargen for SDEM linjen til rød</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()  <span class="co"># Bruker et minimalistisk tema for plottet</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generer prediksjoner fra SDEM-modellen</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">exists</span>(<span class="st">"SDEM"</span>)) {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>({</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    predicted_sdem <span class="ot">&lt;-</span> <span class="fu">predict</span>(SDEM, <span class="at">newdata =</span> data_with_area_vars, <span class="at">listw =</span> lw3)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    data_with_area_vars<span class="sc">$</span>predicted_sdem <span class="ot">&lt;-</span> predicted_sdem</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"En feil oppstod: "</span>, e<span class="sc">$</span>message))</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"SDEM-modellen er ikke definert."</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot for å vise faktisk pris og predikert pris fra SDEM-modellen mot 'sqft_living'</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">exists</span>(<span class="st">"predicted_sdem"</span>)) {</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data_with_area_vars, <span class="fu">aes</span>(<span class="at">x =</span> sqft_living, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="st">"Faktisk Data"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> predicted_sdem, <span class="at">color =</span> <span class="st">"SDEM Modell"</span>), <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Effekt av boligstørrelse (sqft_living) på pris i SDEM-modellen"</span>,</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="st">"Boligstørrelse (sqft)"</span>, <span class="at">y =</span> <span class="st">"Pris"</span>) <span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Faktisk Data"</span> <span class="ot">=</span> <span class="st">"gray"</span>, <span class="st">"SDEM Modell"</span> <span class="ot">=</span> <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Prediksjoner fra SDEM-modellen er ikke tilgjengelig."</span>)</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ekstraher koeffisientene fra SDEM-modellen</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>sdem_coefficients <span class="ot">&lt;-</span> <span class="fu">coef</span>(SDEM)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifiser variablene som finnes både i data og i SDEM-koeffisientene, og sjekk at de er numeriske</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>common_vars <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">names</span>(sdem_coefficients), <span class="fu">colnames</span>(data_with_area_vars))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>numeric_vars <span class="ot">&lt;-</span> common_vars[<span class="fu">sapply</span>(data_with_area_vars[common_vars], is.numeric)]</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Ekstraher bare de numeriske kolonnene og konverter til en numerisk matrise</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>numeric_data <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(data_with_area_vars[, numeric_vars])</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Forsikre oss om at `sdem_coefficients` også er en numerisk vektor med riktig dimensjon</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>relevant_coefficients <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(sdem_coefficients[numeric_vars])</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Sjekk dimensjoner og utfør multiplikasjonen</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">dim</span>(numeric_data))</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">length</span>(relevant_coefficients))</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Beregn prediksjoner manuelt basert på felles variabler</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>data_with_area_vars<span class="sc">$</span>predicted_sdem <span class="ot">&lt;-</span> numeric_data <span class="sc">%*%</span> relevant_coefficients</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot for å vise faktisk pris og predikert pris fra SDEM-modellen mot 'sqft_living'</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_with_area_vars, <span class="fu">aes</span>(<span class="at">x =</span> sqft_living, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="st">"Faktisk Data"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> predicted_sdem, <span class="at">color =</span> <span class="st">"SDEM Modell"</span>), <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Effekt av boligstørrelse (sqft_living) på pris i SDEM-modellen"</span>,</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Boligstørrelse (sqft)"</span>, <span class="at">y =</span> <span class="st">"Pris"</span>) <span class="sc">+</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Faktisk Data"</span> <span class="ot">=</span> <span class="st">"gray"</span>, <span class="st">"SDEM Modell"</span> <span class="ot">=</span> <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Hent koeffisientene fra SDEM-modellen</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>sdem_coefficients <span class="ot">&lt;-</span> <span class="fu">coef</span>(SDEM)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifiser variablene som finnes både i data og i SDEM-koeffisientene</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>common_vars <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">names</span>(sdem_coefficients), <span class="fu">colnames</span>(data_with_area_vars))</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Ekstraher de numeriske kolonnene som matcher relevante koeffisienter</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>numeric_vars <span class="ot">&lt;-</span> common_vars[<span class="fu">sapply</span>(data_with_area_vars[common_vars], is.numeric)]</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>numeric_data <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(data_with_area_vars[, numeric_vars])</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Forsikre oss om at 'sdem_coefficients' også er en numerisk vektor med riktig dimensjon</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>relevant_coefficients <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(sdem_coefficients[numeric_vars])</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Sjekk dimensjoner</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">dim</span>(numeric_data))  <span class="co"># Dimensjon av numeric_data</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">length</span>(relevant_coefficients))  <span class="co"># Lengden på relevante koeffisienter</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Variabler i numeric_data:"</span>)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(numeric_vars)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Relevante koeffisienter:"</span>)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">names</span>(relevant_coefficients))</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Beregn prediksjoner manuelt</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">ncol</span>(numeric_data) <span class="sc">==</span> <span class="fu">length</span>(relevant_coefficients)) {</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    data_with_area_vars<span class="sc">$</span>predicted_sdem <span class="ot">&lt;-</span> numeric_data <span class="sc">%*%</span> relevant_coefficients</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Dimensjonene til numeric_data og relevant_coefficients stemmer ikke overens."</span>)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Selv om jeg ikke fikk til å illustrere grafisk denne modellen diskuteres her resultatene fra 6.0:</em></p>
<p>Moran-plottet for SDEM-residualene indikerer en betydelig reduksjon i romlig autokorrelasjon sammenlignet med OLS-modellen. Residualene er mer spredt, og clustering er mindre tydelig. Dette tyder på at SDEM-modellen effektivt har fanget opp både direkte og indirekte romlige effekter, noe som er essensielt for å håndtere de romlige avhengighetene som er til stede i boligprisdataene. Den flate linjen i plottet bekrefter at romlig autokorrelasjon er minimert, og at modellen gir mer pålitelige estimater for boligpriser.</p>
<p>Den kvantitative analysen, inkludert AIC og log-likelihood, viser at SDEM gir en forbedring i modelltilpasningen sammenlignet med OLS, men ikke nødvendigvis i like stor grad som SEM. SDEM-modellen er fortsatt en god tilnærming for å håndtere romlige effekter, men SEM kan fremstå som den beste modellen i denne sammenhengen.</p></li>
<li><p><strong>Diskusjon av de estimerte koeffisientene for hver modell</strong></p>
<p>For hver modell tolker vi to utvalgte koeffisienter (f.eks., sqft_living og andel_hvit_alene) og diskuterer deres økonomiske betydning, signifikans og rimelighet.</p>
<p><strong>1. OLS-modellen</strong></p>
<p>Koeffisient for** sqft_living: Den positive koeffisienten indikerer at større boliger er assosiert med høyere priser.</p>
<p>Dette er rimelig, ettersom boligkjøpere vanligvis verdsetter større areal. Signifikansen av denne koeffisienten bekrefter at boligstørrelse er en viktig faktor.</p>
<p>Koeffisient for** andel_hvit_alene: En positiv eller negativ koeffisient her kan indikere preferanser basert på nabolagssammensetning.</p>
<p>Hvis koeffisienten er signifikant, kan det tyde på at demografiske faktorer har en økonomisk betydning i boligmarkedet.</p>
<p><strong>2. SEM-modellen (Spatial Error Model)</strong></p>
<p>Koeffisient for** sqft_living: SEM-modellen reduserer spatial autokorrelasjon i residualene, noe som gir en renere effekt av boligstørrelsen på pris.</p>
<p>Koeffisienten forblir positiv, noe som fortsatt indikerer at større boliger gir høyere priser.</p>
<p>Koeffisient for** andel_hvit_alene: Den spatialt justerte modellen tar høyde for romlige feilkorrelasjoner, noe som kan gi et mer pålitelig estimat for demografiske preferanser og redusere skjevheter fra naboområder.</p>
<p><strong>3. SAR-modellen (Spatial Lag Model)</strong></p>
<p>For SAR-modellen må vi bruke <strong>direkte og indirekte impacts</strong> for å tolke effekten av variablene, da disse gir oss en mer fullstendig forståelse av både lokale og globale effekter.</p>
<p>Direkte impact for** sqft_living: Direkte effekten viser hvordan en økning i boligstørrelsen påvirker prisen i samme område.</p>
<p>Den positive direkte effekten betyr at større boliger gir høyere priser, selv etter å ha tatt hensyn til naboers priser.</p>
<p>Indirekte impact for** andel_hvit_alene: Den indirekte effekten indikerer hvordan sammensetningen i ett nabolag påvirker prisene i omkringliggende områder.</p>
<p>Hvis andel_hvit_alene har en signifikant indirekte effekt, betyr det at demografiske faktorer i ett område påvirker boligpriser i nærliggende områder også.</p>
<p><strong>4. SLX-modellen (Spatial Lag of X)</strong></p>
<p><strong>Koeffisient for</strong> sqft_living: I SLX-modellen ser vi kun på effekten av laggede uavhengige variabler, og sqft_living har en positiv koeffisient, noe som betyr at prisene påvirkes direkte av boligens størrelse, og dette er romlig avhengig av naboenes boligstørrelse.</p>
<p><strong>Koeffisient for</strong> andel_hvit_alene: Denne koeffisienten kan fange opp naboers demografiske påvirkning på boligprisen i en gitt bolig.</p>
<p>Hvis signifikant, betyr det at nabolagssammensetningen har en økonomisk innvirkning, også i forhold til nærliggende nabolag.</p>
<p><strong>5. SDEM-modellen (Spatial Durbin Error Model)</strong></p>
<p><strong>Direkte effekt for</strong> sqft_living: Den positive direkte effekten for sqft_living antyder at større boliger har høyere priser, selv etter å ha kontrollert for spatial feilavhengighet og effekten av nabolagsegenskaper.</p>
<p>I<strong>ndirekte effekt for</strong> andel_hvit_alene: Den indirekte effekten viser hvordan nabolagskomposisjonen påvirker omkringliggende boligpriser.</p>
<p>Hvis signifikant, indikerer dette at demografiske faktorer ikke bare påvirker lokalt, men også har en viss spillover-effekt til andre nærliggende områder.</p>
<p><strong>Konklusjon</strong></p>
<p>Den hedoniske boligprismodellen viser oss hvordan boligkjøpere verdsetter ulike boligelementer, og ved å bruke romlige modeller som SAR, SEM, SLX og SDEM får vi bedre innsikt i de økonomiske effektene av både lokale og globale romlige forhold. Generelt viser analysene at boligens areal (sqft_living) konsekvent er positivt korrelert med pris, mens demografiske variabler som andel_hvit_alene kan ha både direkte og indirekte effekter avhengig av modellvalg. Den romlige modellen med de beste residualene (SDEM) ser ut til å gi den mest pålitelige vurderingen av de økonomiske effektene for både lokale og nabopåvirkninger.</p></li>
</ul>
</section>
<section id="konklusjon" class="level1">
<h1><strong>8.0 Konklusjon</strong></h1>
<p>Den hedoniske boligprismodellen gir innsikt i hvordan boligkjøpere verdsetter ulike boligelementer, og ved å anvende romlige modeller som SAR, SEM, SLX og SDEM får vi bedre forståelse av de økonomiske effektene av både lokale og globale romlige forhold. Analysene viser at boligens areal (sqft_living) er konsekvent positivt korrelert med pris, mens demografiske variabler som andel_hvit_alene kan ha både direkte og indirekte effekter avhengig av modellvalg.</p>
<p>Gjennom analysen av romlige avhengigheter i boligprisdata med modeller som OLS, SEM, SAR, SDEM og SLX, avdekkes at OLS-modellen ikke klarer å håndtere romlig autokorrelasjon, noe som fører til skjevhet i residualene. SEM og SDEM-modellene er mer effektive i å fange opp og redusere romlige effekter, med SDEM som den mest pålitelige modellen for å vurdere økonomiske effekter av både lokale og nabopåvirkninger. Selv om SLX-modellen viser en viss forbedring, er den ikke like effektiv som SEM og SDEM.</p>
<p>Evalueringen av modellene gjennom AIC og log-likelihood indikerer at SLX gir en god balanse mellom tilpasning og kompleksitet, men både SEM og SDEM gir betydelige forbedringer sammenlignet med OLS. Samlet sett understreker analysen viktigheten av å bruke romlige modeller for å oppnå mer nøyaktige og pålitelige estimater i boligmarkedet, noe som er avgjørende for informerte beslutninger og effektiv politikk.</p>
</section>
<section id="section-1" class="level1">
<h1></h1>
<p>❗️Oversikt ❗️</p>
<ul>
<li>SAR -modellen -&gt; Må vi gjøre detta gjennom hele oppgaven?</li>
<li>Refere til modellene</li>
<li>Finne relevante kilder (eventuelt bare hennvise til de kildene Arnstein bruker i oppgaveteksten)</li>
<li>Klare å illustrer grafisk SLX og SDEM (og eventuelt SAR då…)</li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>